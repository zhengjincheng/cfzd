<!doctype html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:th="http://www.thymeleaf.org">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="viewport"
	content="width=device-width, initial-scale=1,maximum-scale=1, user-scalable=no">
<title>首页</title>
<link href="../static/jquery-mobile/jquery.mobile-1.3.0.min.css"
	rel="stylesheet" type="text/css">
<script src="../static/jquery-mobile/jquery-1.11.1.min.js"
	type="text/javascript"></script>
<script src="../static/jquery-mobile/jquery.mobile-1.3.0.min.js"
	type="text/javascript"></script>
<!--	  <script src="infinite-scroll/js/admin/infinite-scoll.js" type="text/javascript"></script>-->
</head>

<body>
	<div data-role="page" id="page">
		<!-- 
  <div data-role="header">
    <h1>标题</h1>
  </div>-->

		<div data-role="navbar">
			<ul>
				<li><a href="#anylink" class="ui-btn-active ui-state-persist">书法</a></li>
				<li><a href="#anylink">绘画</a></li>
				<li><a href="#anylink">金石</a></li>
				<li><a href="#anylink">另有</a></li>
			</ul>
		</div>
		<div data-role="content">
			<ul data-role="listview" id="posts">
				<!-- 
      <li><img src="images/s1.jpg" /><p>标题<p></li>
      <li><img src="images/s2.jpg" /><p>标题<p></li>
      <li><img src="images/s3.jpg" /><p>标题<p></li>
       -->
			</ul>


			<p id="loading">
				<img src="../static/images/s3.jpg" alt="Loading…" /> 
				<img src="../static/images/s4.jpg" alt="Loading…" />

			</p>
		</div>
		<div data-role="footer" data-position="fixed">
			<div data-role="navbar">
				<ul>
					<li><a href="./index" data-icon="home"  rel="external">首页</a></li>
					<li><a href="./category" data-icon="info"
						class="ui-btn-active ui-state-persist"  rel="external">分类</a></li>
					<li><a href="#anylink" data-icon="plus">发布</a></li>
					<li><a href="#anylink" data-icon="check">关注</a></li>
					<li><a href="#anylink" data-icon="gear">我的</a></li>
				</ul>
			</div>
		</div>
	</div>
	<script type="text/javascript">
		$(document).ready(
				function() {
					var win = $(window);

					// Each time the user scrolls
					win.scroll(function() {
						// End of the document reached?
						if ($(document).height() - win.height() == win
								.scrollTop()) {
							$('#loading').show();

							$.get('article?articleCateType=head', function(
									data, status) {
								var articles = data;
								$.each(articles,
										function(index, value) {
											//alert(value.title);
											$('#posts').append(
													'<li><img src="'+value.image+'" /><p>'
															+ value.title
															+ '<p></li>');
										});

								$('#loading').hide();

							});
						}
					});
				});
	</script>
</body>
</html>
